{
  "entities": [
    { "id": "player", "properties": { "health": 100 } },
    { "id": "boss", "tags": [ "enemies", "boss" ], "properties": { "health": 500 } }
  ],
  "rules": [
    {
      "from": "@player,!enter:#enemies:#boss",
      "where": {
        "filter": [
          { "var": "entities" },
          { "<": [{ "var": "properties.distance" }, 10] }
        ]
      },
      "do": {
        "mut": {
          "map": [
            { "var": "entities" },
            {
              "merge": [
                { "var": "" },
                { "properties": { "inCombat": true } }
              ]
            }
          ]
        }
      }
    }
  ]
}
