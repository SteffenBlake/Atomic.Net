{
  "entities": [
    { "id": "goblin", "tags": ["poisoned"], "properties": { "health": 50, "poisonStacks": 3 } }
  ],
  "rules": [
    {
      "from": "#poisoned",
      "where": {
        "filter": [
          { "var": "entities" },
          { ">": [{ "var": "properties.poisonStacks" }, 0] }
        ]
      },
      "do": {
        "mut": [
          {
            "target": { "properties": "health" },
            "value": { "-": [{ "var": { "cat": ["entities.", { "var": "index" }, ".properties.health"] } }, 1] }
          }
        ]
      }
    }
  ]
}
